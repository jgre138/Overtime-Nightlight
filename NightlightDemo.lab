{"identifier":"f8eb595f-879d-45cb-92bd-abf8d6b4328c","name":"Untitled Program (2)","summary":"","data":"15;javascript&//  Variables;\nlet WAIT_TIME = 10;\n//  seconds to wait for tap;\nlet TAP_THRESHOLD = 1.05;\n//  G threshold for tap detection;\nlet human_found = false;\nlet trip_done = false;\n\n//  Detect tap via accelerometer spike (DO NOT TOUCH THIS WORKS)\nasync function detect_tap(timeout) {\n    let a;\n    let mag;\n    // Wait up to timeout seconds for a tap. Return True if detected.\n    let waited = 0.0;\n    while (waited < timeout) {\n        a = getAcceleration();\n        mag = (a[\"x\"] ** 2 + a[\"y\"] ** 2 + a[\"z\"] ** 2) ** 0.5;\n        if (mag >= TAP_THRESHOLD) {\n            return true;\n        }\n        \n        await delay(0.1);\n        waited += 0.1;\n    }\n    \n    return false;\n}\n\n//  Check for Human\nasync function checkHuman() {\n    // # Not needed for arrival, more so checking to see where the user is;\n    setMainLed({ \"r\": 255, \"g\": 255, \"b\": 255 });\n    //  white flash;\n    let tapped = await detect_tap(WAIT_TIME);\n    if (tapped) {\n        setMainLed({ \"r\": 0, \"g\": 255, \"b\": 0 });\n        //  green confirm;\n        await speak(\"Human is here! Lets go!\", false);\n        //  user is at A along with robot;\n        human_found = true;\n    } else {\n        setMainLed({ \"r\": 255, \"g\": 0, \"b\": 0 });\n        //  red timeout;\n        await speak(\"Human is not here, let me find them.\", false);\n        human_found = false;\n    }\n    \n}\n\n//  --- MOVE TO A ---;\nasync function go_to_a() {\n    playMatrixAnimation(4, true); // go\n    //await speak(\"going to a!\", false);\n    await delay(1);\n    await roll(0, 50, 2);\n    await delay(1);\n    playMatrixAnimation(0, true); //stop\n    await delay(1); \n}\n\n//  --- MOVE TO B ---\nasync function go_to_b() {\n    playMatrixAnimation(4, true); //go\n    //await speak(\"going to b!\", false);\n    await delay(1);\n    await roll(180, 50, 2);\n    await delay(1);\n    playMatrixAnimation(0, true); //stop\n    await delay(1);\n}\n\n//The shuttle process\nasync function shuttle() {\n    \n    while (trip_done != true) {\n        await speak(\"Hello, ready for the shuttle?\", false);\n        await checkHuman();\n        if (human_found) {\n            await go_to_b();\n            trip_done = true;\n            await delay(2);\n            playMatrixAnimation(3, false);// Checkmark\n            await delay(3);\n            await speak(\"Shuttle complete!\", false);\n        } else {\n            await go_to_a();\n            await delay(1);\n        }\n    } \n}\n\n//  --- MAIN PROGRAM ---;\nasync function startProgram() {\n    //  start at a (A is Home);\n    await shuttle();\n}\n\n//  use for future stuff;\n// await rollToDistance(0, 100, 50); move forward 50cm;\n// await rollToDistance(0, -100, 50); move backward 50 cm;\n// play_matrix_animation(0, False) #stop;\n// play_matrix_animation(1, False) #up;\n// play_matrix_animation(2, False) #down;\n// play_matrix_animation(3, False) #Checkmark;\n// play_matrix_animation(4, False) #go;\n// play_matrix_animation(5, True) #yeild;\n\n// The Matrix Animations;\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 2, 2, 2, 2, 1, 1], [1, 2, 2, 2, 2, 2, 2, 1], [2, 2, 2, 2, 2, 2, 2, 2], [2, 2, 2, 2, 2, 2, 2, 2], [2, 2, 2, 2, 2, 2, 2, 2], [2, 2, 2, 2, 2, 2, 2, 2], [1, 2, 2, 2, 2, 2, 2, 1], [1, 1, 2, 2, 2, 2, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 0, 0, 0, 0, 1, 1], [1, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 1], [1, 1, 0, 0, 0, 0, 1, 1], [1, 1, 1, 0, 0, 1, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 1, 1, 1, 1, 1, 8], [1, 1, 1, 1, 1, 1, 8, 8], [1, 1, 1, 1, 1, 8, 8, 8], [1, 1, 1, 1, 8, 8, 8, 1], [8, 8, 1, 8, 8, 8, 1, 1], [8, 8, 8, 8, 8, 1, 1, 1], [1, 8, 8, 8, 1, 1, 1, 1], [1, 1, 8, 1, 1, 1, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 8, 8, 8, 8, 1, 1], [1, 8, 8, 8, 8, 8, 8, 1], [8, 8, 8, 8, 8, 8, 8, 8], [8, 8, 8, 8, 8, 8, 8, 8], [8, 8, 8, 8, 8, 8, 8, 8], [8, 8, 8, 8, 8, 8, 8, 8], [1, 8, 8, 8, 8, 8, 8, 1], [1, 1, 8, 8, 8, 8, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\nregisterMatrixAnimation({ \"frames\": [[[1, 1, 6, 6, 6, 6, 1, 1], [1, 6, 6, 6, 6, 6, 6, 1], [6, 6, 6, 6, 6, 6, 6, 6], [6, 6, 6, 6, 6, 6, 6, 6], [6, 6, 6, 6, 6, 6, 6, 6], [6, 6, 6, 6, 6, 6, 6, 6], [1, 6, 6, 6, 6, 6, 6, 1], [1, 1, 6, 6, 6, 6, 1, 1]]], \"palette\": [{ \"r\": 255, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 0, \"b\": 0 }, { \"r\": 255, \"g\": 64, \"b\": 0 }, { \"r\": 255, \"g\": 128, \"b\": 0 }, { \"r\": 255, \"g\": 191, \"b\": 0 }, { \"r\": 255, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 246, \"b\": 30 }, { \"r\": 0, \"g\": 255, \"b\": 0 }, { \"r\": 185, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 255, \"b\": 255 }, { \"r\": 0, \"g\": 0, \"b\": 255 }, { \"r\": 145, \"g\": 0, \"b\": 211 }, { \"r\": 157, \"g\": 48, \"b\": 118 }, { \"r\": 255, \"g\": 0, \"b\": 255 }, { \"r\": 204, \"g\": 27, \"b\": 126 }], \"fps\": 10, \"transition\": MatrixAnimationTransition.None });\n","modified_on":"2025-09-23T11:24:56.4148000-04:00","program_type":"text","robots":[{"id":9}]}